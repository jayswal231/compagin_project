<!-- my_data/category_data.html -->

{% extends 'base.html'%}


{% block main %}




<ul>
    {% for item in final_data.age_data %}
    <li>{{ item.age }}: {{ item.count }}</li>
    {% endfor %}
</ul>

{% for ethnicity, age_data in final_data.ethnicity_data.items %}
<h3>{{ ethnicity }}</h3>
<table>
    <thead>
        <tr>
            <th>Age Group</th>
            <th>Male</th>
            <th>Female</th>
            <th>Trans sex</th>
        </tr>
    </thead>
    <tbody>

        {% for age_group, gender_data in age_data.items %}
        <tr>
            <td>{{ age_group }}</td>
            <td>{{ gender_data.male }}</td>
            <th>{{gender_data.female}}</th>
            <td>{{ gender_data.trans_sex }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endfor %}




<div>

    


    <table class="table table-striped table-bordered table-sm">
        <thead>
            <tr>
                <th rowspan="2" class="col">Category</th>
                {% for ethnicity in ethnicities %}
                <th colspan="3" class="col">{{ethnicity.1}}</th>
                {% endfor %}
            </tr>
            <tr>
                {% for ethnicity in ethnicities %}
                <th>Male</th>
                <th>Female</th>
                <th>Others</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>


            {% if data %}

            {% for category in data %}
            <tr>
                <td class="col">{{category.category}}</td>
                {% for ethnicity, gender_counts in category.ethnicities.items %}
                {% for gender, count in gender_counts.items %}
                <td class="col">{{count}}</td>
                {% endfor %}
                {% endfor %}
            </tr>
            {% endfor %}

            {% else %}
        

            {% for category in categories %}
            <tr>
                <td class="col">{{category}}</td>
                {% for ethnicity in ethnicities %}
                <td class="col">0</td>
                <td class="col">0</td>
                <td class="col">0</td>
                {% endfor%}

            </tr>
            {% endfor %}

            {% endif %}
            
        </tbody>
    </table>




    <table class="table table-striped table-bordered table-sm">
        <thead>
            <tr>
                <th rowspan="2" class="col">Age Group</th>
                {% for ethnicity in ethnicities %}
                <th colspan="3" class="col">{{ethnicity.1}}</th>
                {% endfor %}
            </tr>
            <tr>
                {% for ethnicity in ethnicities %}
                <th>Male</th>
                <th>Female</th>
                <th>Others</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for age_group, data in final_data.items %}
            <tr>
                {% for item in data %}
                {{item}}
                <td>{{age_group}}</td>
                <td>{{ gender_data.male }}</td>
                <th>{{gender_data.female}}</th>
                <td>{{ gender_data.trans_sex }}</td>
                {% endfor %}
            </tr>
            {% endfor %}
            
        
        </tbody>
    </table>
</div>
</div>


{% endblock %}